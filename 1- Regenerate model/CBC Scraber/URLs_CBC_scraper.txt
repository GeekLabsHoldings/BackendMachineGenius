const puppeteer = require('puppeteer')

const get_content_from_url = async () => {
  const browser = await puppeteer.launch({
    headless: false,
    defaultViewport: null,
  });

  // Open a new page
  const page = await browser.newPage();

  await page.goto("https://www.cbc.ca/news/politics//news/politics/frank-baylis-liberal-leadership-replace-justin-trudeau-1.7246713", {
    waitUntil: "domcontentloaded",
  });

  const content = await page.evaluate(() => {
  const ScrapeList = document.querySelectorAll(".story p");

  return Array.from(ScrapeList).map((Scrape) => {
    const text = Scrape.innerText;
    return text;
    });
  });

  // Display the content
  console.log(content);
  console.log("---------------------")

  // Close the browser
  await browser.close();
};

// Start the scraping
get_content_from_url();